module pc_cnt (
    input wire clk,
    input wire reset,
    input wire [31:0] pcnext,
    output reg [31:0] pc
);

    always @(posedge clk or posedge reset) begin
        if (reset)
            pc <= 32'b0;  // ? Start from address 0x00000000
        else
            pc <= pcnext;
    end

endmodule

`timescale 1ns / 1ps

module tb_pc_cnt;

    // Testbench signals
    reg clk;
    reg reset;
    reg [31:0] pcnext;
    wire [31:0] pc;

    // Instantiate the DUT (Device Under Test)
    pc_cnt uut (
        .clk(clk),
        .reset(reset),
        .pcnext(pcnext),
        .pc(pc)
    );

    // Clock generation: toggle every 5 ns (10 ns full period)
    always #5 clk = ~clk;

    initial begin
        $display("=== STARTING PC_CNT TEST ===");

        // Initial values
        clk = 0;
        reset = 1;
        pcnext = 32'h00000000;

        // Hold reset for 10ns
        #10;
        reset = 0;

        // Cycle 1: Set pcnext = 4
        pcnext = 32'd4;
        #10;  // Rising edge at 20ns
        $display("Time = %0t | PC = %h", $time, pc);  // Expect: 0x00000004

        // Cycle 2: Set pcnext = 8
        pcnext = 32'd8;
        #10;  // Rising edge at 30ns
        $display("Time = %0t | PC = %h", $time, pc);  // Expect: 0x00000008

        // Cycle 3: Set pcnext = 12
        pcnext = 32'd12;
        #10;  // Rising edge at 40ns
        $display("Time = %0t | PC = %h", $time, pc);  // Expect: 0x0000000C

        // Apply async reset again to see effect
        reset = 1;
        #10;
        reset = 0;
        #10;
        $display("Time = %0t | PC = %h (After Reset)", $time, pc);  // Expect: 0x00000000

        $display("=== END OF PC_CNT TEST ===");
        $stop;
    end

endmodule
